<Application x:Class="PhotoTranslationTool.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:tb="http://www.hardcodet.net/taskbar"
             xmlns:local="clr-namespace:PhotoTranslationTool"
             StartupUri="MainWindow.xaml">

    <Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <!-- MahApps.Metro styles -->
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Controls.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Fonts.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Themes/Dark.Purple.xaml" />
            </ResourceDictionary.MergedDictionaries>

            <!-- 👇 Đặt TaskbarIcon vào đây -->
            <ContextMenu x:Key="TrayMenu">
                <ContextMenu.Resources>

                    <!-- Bo tròn và nền ContextMenu -->
                    <Style TargetType="ContextMenu">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="ContextMenu">
                                    <Border
                                        Background="Black"
                                        CornerRadius="10"
                                        BorderBrush="#CC6459DF"
                                        BorderThickness="1"
                                        Padding="5">
                                        <StackPanel IsItemsHost="True"/>
                                    </Border>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>

                    <!-- Style cho MenuItem -->

                </ContextMenu.Resources>

                <MenuItem Header="Hotkey: Ctrl + Shift + Alt + Z"/>
                <MenuItem Header="Open" Click="Open_Click"/>
                <MenuItem Header="Exit" Click="Exit_Click"/>
            </ContextMenu>

            <tb:TaskbarIcon x:Key="MyNotifyIcon"
                            IconSource="pack://application:,,,/Assets/translation_exists_icon_143678.ico"
                            ToolTipText="Translation Tool"
                            ContextMenu="{StaticResource TrayMenu}"
                            TrayMouseDoubleClick="NotifyIcon_MouseDoubleClick"/>
        </ResourceDictionary>

    </Application.Resources>

</Application>
